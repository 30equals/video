// $Id$
UPGRADING FROM 4.6 TO 4.7

1 - Backup your database and your drupal directory

2 - Using your favorite mysql client run the following SQL queries:

If upgrading from video.module for drupal 4.6:
ALTER TABLE `video`
  CHANGE `videox` `videox` smallint(4) unsigned NOT NULL default '0',
  CHANGE `videoy` `videoy` smallint(4) unsigned NOT NULL default '0',
  CHANGE `size` `size` bigint(13) unsigned default NULL,
  CHANGE `clicks` `download_counter` INT( 10 ) UNSIGNED NOT NULL DEFAULT '0',
  ADD play_counter int(10) unsigned NOT NULL default '0',
  ADD video_bitrate int(11) unsigned default NULL,
  ADD audio_bitrate int(11) unsigned default NULL,
  ADD audio_sampling_rate int(11) unsigned default NULL,
  ADD audio_channels enum('','5.1','stereo','mono') default NULL,
  ADD playtime_seconds int(11) unsigned default NULL,
  ADD download_folder varchar(255) NULL default NULL,
  ADD disable_multidownload tinyint(1) unsigned NOT NULL default '0',
  ADD use_play_folder tinyint(1) unsigned NOT NULL default '0',
  ADD custom_field_1 varchar(255) NULL default NULL,
  ADD custom_field_2 varchar(255) NULL default NULL,
  ADD custom_field_3 varchar(255) NULL default NULL,
  ADD custom_field_4 varchar(255) NULL default NULL,
  ADD custom_field_5 varchar(255) NULL default NULL,
  ADD custom_field_6 varchar(255) NULL default NULL
;


If upgrading from video.module v1.8 database scheme:

ALTER TABLE `video` CHANGE `clicks` `download_counter` INT( 10 ) UNSIGNED NOT NULL DEFAULT '0';
ALTER TABLE `video` CHANGE `audio_channels` `audio_channels` ENUM( '', '5.1', 'stereo', 'mono' ) NULL DEFAULT NULL;
ALTER TABLE video ADD play_counter int(10) unsigned NOT NULL default '0';
ALTER TABLE video ADD download_folder varchar(255) NULL default NULL;
ALTER TABLE video ADD disable_multidownload tinyint(1) unsigned NOT NULL default '0';
ALTER TABLE video ADD use_play_folder tinyint(1) unsigned NOT NULL default '0';
ALTER TABLE video ADD custom_field_1 varchar(255) NULL default NULL;
ALTER TABLE video ADD custom_field_2 varchar(255) NULL default NULL;
ALTER TABLE video ADD custom_field_3 varchar(255) NULL default NULL;
ALTER TABLE video ADD custom_field_4 varchar(255) NULL default NULL;
ALTER TABLE video ADD custom_field_5 text NULL default NULL;
ALTER TABLE video ADD custom_field_6 text NULL default NULL;

3 - Replace video.module file for 4.6 with video.module for 4.7

4 - Your video.module installation is upgraded

5 - Report any problems to 
    Fabio Varesano - fvaresano at yahoo dot it
	 or
	 Luke Last - luke [at] lukelast dot com
